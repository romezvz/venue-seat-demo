import{a as $,b as j}from"./chunk-CAKWSWBY.js";import{b as B,e as N}from"./chunk-F7IJWT36.js";import{a as D}from"./chunk-UHZE7DYQ.js";import{Ca as I,Fa as v,Fb as M,Gb as w,L as x,Ma as d,Na as l,Oa as r,Pa as C,R as m,Sa as y,Ta as g,Ua as S,Wa as o,Xa as u,Y as _,Ya as s,Z as E,Za as h,ab as T,bb as c,cb as p,ta as n,tb as A,ub as k,vb as O,wb as F}from"./chunk-LLJ5UMZW.js";var f=class i{_httpClient=m(B);_apiUrl=`${$.apiUrl}/seats`;getSeatsByEvent(t){return this._httpClient.get(`${this._apiUrl}?eventId=${t}`)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=x({token:i,factory:i.\u0275fac,providedIn:"root"})};var z=(i,t)=>({"bg-green-300 dark:bg-green-400":i,"bg-gray-300 dark:bg-gray-400":t});function R(i,t){if(i&1){let e=y();l(0,"button",8),g("click",function(){let b=_(e).$implicit,U=S();return E(U.toggleSeat(b))}),o(1),C(2,"br"),o(3),r()}if(i&2){let e=t.$implicit;d("ngClass",T(4,z,e.available,!e.available))("disabled",!e.available),n(),s(" ",e.id,""),n(2),s(" ",e.price," \u20AC ")}}function K(i,t){if(i&1&&(l(0,"div")(1,"h3",11),o(2),c(3,"translate"),r(),l(4,"p")(5,"strong"),o(6),c(7,"translate"),r(),o(8),r(),l(9,"p")(10,"strong"),o(11),c(12,"translate"),r(),o(13),r(),l(14,"p")(15,"strong"),o(16),c(17,"translate"),r(),o(18),r()()),i&2){let e=S().$implicit,a=S();n(2),h(" ",p(3,8,"SEATS.EVENT"),": ",a.selectionService.selections[e].event.name," "),n(4),s("",p(7,10,"SEATS.DATE"),":"),n(2),s(" ",a.selectionService.selections[e].event.date," "),n(3),s("",p(12,12,"SEATS.SEATS"),":"),n(2),s(" ",a.getSelectedSeatIds(e).join(", ")," "),n(3),s("",p(17,14,"SEATS.TOTAL"),":"),n(2),s(" ",a.selectionService.getTotal(e)," \u20AC ")}}function L(i,t){if(i&1&&(l(0,"div",9),v(1,K,19,16,"div",10),r()),i&2){let e=t.$implicit,a=S();n(),d("ngIf",a.selectionService.selections[e]==null||a.selectionService.selections[e].seats==null?null:a.selectionService.selections[e].seats.length)}}var P=class i{_seatService=m(f);_eventService=m(j);_route=m(N);selectionService=m(D);event;seats=[];selectedIds=[];selectionKeys=()=>Object.keys(this.selectionService.selections).map(Number);ngOnInit(){let t=Number(this._route.snapshot.paramMap.get("eventId"));this._seatService.getSeatsByEvent(t).subscribe(e=>this.seats=e),this._eventService.getEventById(t).subscribe(e=>{this.event=e})}toggleSeat(t){this.selectionService.toggleSeat(this.event,t)}confirmPurchase(){this.selectionService.clearAll(),alert("Compra simulada con \xE9xito \u2705")}getSelectedSeatIds(t){return this.selectionService.selections[t]?.seats.map(e=>e.id)??[]}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=I({type:i,selectors:[["rz-seat-selector"]],decls:14,vars:11,consts:[[1,"p-4"],[1,"text-xl","font-bold","mb-4"],[1,"grid","grid-cols-4","gap-3","mb-6"],["class","p-2 rounded transition",3,"ngClass","disabled","click",4,"ngFor","ngForOf"],[1,"p-3","border-t","pt-4"],[1,"text-lg","font-semibold","mb-2"],["class","mb-4",4,"ngFor","ngForOf"],[1,"mt-4","bg-zinc-800","dark:bg-white","text-white","dark:text-zinc-800","px-4","py-2","rounded",3,"click"],[1,"p-2","rounded","transition",3,"click","ngClass","disabled"],[1,"mb-4"],[4,"ngIf"],[1,"font-bold"]],template:function(e,a){e&1&&(l(0,"div",0)(1,"h2",1),o(2),c(3,"translate"),r(),l(4,"div",2),v(5,R,4,7,"button",3),r(),l(6,"div",4)(7,"h3",5),o(8),c(9,"translate"),r(),v(10,L,2,1,"div",6),l(11,"button",7),g("click",function(){return a.confirmPurchase()}),o(12),c(13,"translate"),r()()()),e&2&&(n(2),u(p(3,5,"SEATS.TITLE")),n(3),d("ngForOf",a.seats),n(3),u(p(9,7,"SEATS.SUMMARY")),n(2),d("ngForOf",a.selectionKeys()),n(2),s(" ",p(13,9,"SEATS.CONFIRM")," "))},dependencies:[F,A,k,O,w,M],encapsulation:2})};export{P as SeatSelectorComponent};
